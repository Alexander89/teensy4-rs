<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `teensy4_bsp` crate."><meta name="keywords" content="rust, rustlang, rust-lang, teensy4_bsp"><title>teensy4_bsp - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../teensy4_bsp/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate teensy4_bsp</p><div class="block version"><p>Version 0.2.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all teensy4_bsp's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class="location"></p><script>window.sidebarCurrent = {name: "teensy4_bsp", ty: "mod", relpath: "../"};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/teensy4_bsp/lib.rs.html#1-133" title="goto source code">[src]</a></span><span class="in-band">Crate <a class="mod" href="">teensy4_bsp</a></span></h1><div class="docblock"><p>A Rust board support package (BSP) for the Teensy 4. Supports the Teensy 4.0 and
4.1 boards.</p>
<p>Peripherals are re-exported from the <a href="imxrt_hal"><code>imxrt-hal</code></a>
hardware abstraction layer. See the HAL's documentation for more information on creating
and using peripherals.</p>
<h1 id="runtime" class="section-header"><a href="#runtime">Runtime</a></h1>
<p>The <code>teensy4-bsp</code> use the <a href="https://crates.io/crates/cortex-m-rt"><code>cortex-m-rt</code></a> crate to provide a runtime. Enable runtime support using
the <code>&quot;rt&quot;</code> feature. To properly link your program, you <strong>must link with the <code>t4link.x</code> linker
script</strong>.</p>
<p>The <code>teensy4-bsp</code> emits a <code>cortex-m-rt</code>-compatible linker script. The layout supports the i.MX RT's boot requirements
and advanced memory features. Specifically, the layout includes the image vector table (IVT) and boot data
that's necessary for i.MX RT processors. Additionally, the layout specifies the FlexSPI configuration block's (FCB)
FLASH location. Finally, the linker script places all instructions in ITCM, and all data in DTCM.</p>
<p>The <code>teensy4-bsp</code> provides its own reset hander. The custom reset handler</p>
<ul>
<li>initalizes TCM regions</li>
<li>copies instructions into ITCM</li>
<li>copies the vector table into DTCM, and sets VTOR</li>
<li>set's the CCM's low-power setting</li>
<li>prepares memory caches</li>
</ul>
<p>The reset handler then calls the <code>cortex-m-rt</code> entrypoint to finish memory initialization and invoke your program's
<code>main()</code>.</p>
<h1 id="features" class="section-header"><a href="#features">Features</a></h1>
<p>The <code>teensy4-bsp</code> supports these features:</p>
<table><thead><tr><th>Flag</th><th>Description</th><th>Default?</th></tr></thead><tbody>
<tr><td><code>&quot;systick&quot;</code></td><td>Registers a SYSTICK exception handler that's called every millisecond</td><td>✓</td></tr>
<tr><td><code>&quot;usb-logging&quot;</code></td><td>Adds support for logging over USB with the <code>log</code> crate</td><td>✓</td></tr>
<tr><td><code>&quot;rt&quot;</code></td><td>Adds runtime support using <code>cortex-m-rt</code></td><td></td></tr>
<tr><td><code>&quot;rtic&quot;</code></td><td>Adds support for using the BSP peripherals with RTIC</td><td></td></tr>
</tbody></table>
<p>Notes:</p>
<ul>
<li>Combining <code>&quot;rtic&quot;</code> with <code>&quot;systick&quot;</code> is not supported. RTIC may try to register a SYSTICK exception handler, which
conflicts with the BSP's definition.</li>
</ul>
<p>Proper RTIC support requires that you disable the BSP's default features. You may combine <code>&quot;rtic&quot;</code> with
either <code>&quot;rt&quot;</code> and <code>&quot;usb-logging&quot;</code>.</p>
<pre><code class="language-toml">[dependencies.teensy4-bsp]
default-features = false
features = [&quot;rtic&quot;,  &quot;rt&quot;]
version = # ...
</code></pre>
<h1 id="pins" class="section-header"><a href="#pins">Pins</a></h1>
<p>The BSP helps you convert all the i.MX RT processor pads into your Teensy 4's pins.
From these pins, you may construct peripherals and perform I/O. The Teensy 4.0 and 4.1
boards support many of the same pins; see the <a href="../teensy4_bsp/common/index.html" title="common"><code>common</code></a> module
for those similar pins. To construct Teensy 4.0 or 4.1 pins, see the
<a href="../teensy4_bsp/t40/fn.into_pins.html"><code>t40::into_pins</code></a> and <a href="../teensy4_bsp/t41/fn.into_pins.html"><code>t41::into_pins</code></a>
for more information.</p>
<h1 id="examples" class="section-header"><a href="#examples">Examples</a></h1>
<p>Turn on a Teensy 4.0's LED:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">cortex_m</span>::<span class="ident">asm</span>::<span class="ident">wfi</span>;
<span class="kw">use</span> <span class="ident">teensy4_bsp</span> <span class="kw">as</span> <span class="ident">bsp</span>;

<span class="kw">use</span> <span class="ident">embedded_hal</span>::<span class="ident">digital</span>::<span class="ident">v2</span>::<span class="ident">OutputPin</span>;

<span class="kw">let</span> <span class="ident">peripherals</span> <span class="op">=</span> <span class="ident">bsp</span>::<span class="ident">Peripherals</span>::<span class="ident">take</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">pins</span> <span class="op">=</span> <span class="ident">bsp</span>::<span class="ident">t40</span>::<span class="ident">into_pins</span>(<span class="ident">peripherals</span>.<span class="ident">iomuxc</span>);
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">led</span> <span class="op">=</span> <span class="ident">bsp</span>::<span class="ident">configure_led</span>(<span class="ident">pins</span>.<span class="ident">p13</span>);

<span class="kw">loop</span> {
    <span class="ident">led</span>.<span class="ident">set_high</span>().<span class="ident">unwrap</span>();
    <span class="ident">wfi</span>();
}</pre></div>
<p>See more examples in the project's repository.</p>
</div><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use imxrt_hal as hal;</code></td></tr></table><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<table><tr class="module-item"><td><a class="mod" href="common/index.html" title="teensy4_bsp::common mod">common</a></td><td class="docblock-short"><p>Common pinout</p>
</td></tr><tr class="module-item"><td><a class="mod" href="t40/index.html" title="teensy4_bsp::t40 mod">t40</a></td><td class="docblock-short"><p>Teensy 4.0 specific APIs</p>
</td></tr><tr class="module-item"><td><a class="mod" href="t41/index.html" title="teensy4_bsp::t41 mod">t41</a></td><td class="docblock-short"><p>Teensy 4.1 specific APIs</p>
</td></tr><tr class="module-item"><td><a class="mod" href="usb/index.html" title="teensy4_bsp::usb mod">usb</a></td><td class="docblock-short"><span class="stab portability" title="This is supported on crate feature `usb-logging` only"><code>usb-logging</code></span><p>Teensy 4 USB, taken from the original Teensy 4 C libraries</p>
</td></tr></table><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Peripherals.html" title="teensy4_bsp::Peripherals struct">Peripherals</a></td><td class="docblock-short"></td></tr><tr class="module-item"><td><a class="struct" href="struct.SysTick.html" title="teensy4_bsp::SysTick struct">SysTick</a></td><td class="docblock-short"><span class="stab portability" title="This is supported on crate feature `systick` only"><code>systick</code></span><p>A type that represents the system timer, SYSTICK</p>
</td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.interrupt.html" title="teensy4_bsp::interrupt enum">interrupt</a></td><td class="docblock-short"><p>Available interrupts for this device</p>
</td></tr></table><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<table><tr class="module-item"><td><a class="fn" href="fn.configure_led.html" title="teensy4_bsp::configure_led fn">configure_led</a></td><td class="docblock-short"><p>Configure the board's LED</p>
</td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.LED.html" title="teensy4_bsp::LED type">LED</a></td><td class="docblock-short"><p>The LED</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "teensy4_bsp";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>